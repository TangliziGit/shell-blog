# [周报] 2023-09 毕设项目终结

这是一份后续补上的周报。

# 工作

## 实习

这周跟大家一起开了一次会，讨论了一些流数据系统里不清楚的逻辑。顺带讲了一下我们这边的设计方案。

最后觉得有些地方非常naive。我后面把会议上的内容总结在logseq上了，大体是要考虑对算子的状态集合做存储、支持批量读写、考虑序列化和反序列化。

考虑到这里不能写具体的内容，所以我自己想看的话还是去翻翻logseq更好。

## 毕业设计

最后一周付出在毕设项目上了，具体的工作内容是这样：

- 在157上部署了系统，但是因为各种权限的问题，所以可耻的在root上做所有操作了，顺带给root配置了ZSH。
  - 157上具体地，因为缺少nbd模块所以编译了内核模块，编译安装了qemu，编译安装了python3.10（python编译安装一定要注意openssl
- 写好了email发送逻辑，还有性能测试的结果分析。
- 实现了4个sysbench的性能测试计划。
- 修好了tbox teardown卡住的问题。
- 跑起了AArch64的测试机，顺带把AArch64的启动脚本写了。

顺便，在处理teardown卡住的问题时，发现其实是kill错了qemu的pid。我在启动测试机时把`bash -c 'qemu-system-xxx ...'`的pid记录下来了，所以kill掉bash后qemu会转移父进程，做循环检查的时候就会一直卡住。

- 后来用到了`pkill -P`的命令，删除父进程下的所有子进程。但这样父进程本身没kill掉。
- 又尝试了通过`ps -p PID -o pgid=`去查session下的所有pid，然后删除。结果父进程的父进程也会被kill掉。这就不对了。
- 最后还是手动写了shell函数，去递归删除了。不知道有没有好一点的方法。（菜

# 生活

## 运动

似乎回到了73kg左右。其余没什么特别的，正常吃饭正常锻炼这样子。希望能下周维持在72kg。
