# [周报] 2023-11 论文大作战II

这是一篇后续补上的周报。

# 工作

## 实习

请假写论文咯这周。

## 毕业论文

这周周天的时候刚好把测试那一章的框架整理好，然后做做系统压测画画图之类的。不过当天测试出了点毛病，发现e2e耗时总是平白无故多了很多。翻了翻日志发现原来是Tornado框架在处理长耗时请求的时候，会阻塞其他handler。这也是单线程事件循环的特性。所以长耗时请求到来，系统会有一段不可用时间，如果心跳包恰好到来（其实30s的不可用时间能漏掉好多心跳包），那就没法重启计时器了。于是测试机状态变成宕机，上面绑定的任务也就重新调度了。解决方法也很简单，就是给长耗时handler一个线程池，同时把心跳计时器时间改长点，最后给测试机脚本里加上WebSocket断线重连，和HTTP心跳的补偿措施。问题解决。

最后测试结果表现测试机数量固定时，随着提交的流水线数增长，e2e耗时呈现阶梯式增长的样子。跟预想的其实一致。最后差一个不同CPU架构下的性能描述，大概是在内核启动、makepkg时间这种指标上做对比。

话说回来，这周提交初稿已经超时了。所以让我下周把论文整理好交上去。

# 生活

## 运动

最离谱的是我去成都吃吃喝喝，最后体重居然开始掉了。最轻是70.8kg，正在朝60+努力了。
