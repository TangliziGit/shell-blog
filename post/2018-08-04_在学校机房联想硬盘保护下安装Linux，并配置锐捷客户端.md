最近几天一直在机房里刷题，空调开着非常舒服。但是机房电脑里全是windows系统，不太好用，挺膈应人的。
一直打算换个系统，刚才终于搞定网络问题了，以后用电脑就可以爽到了。

### 联想硬盘保护系统下u盘安装
这里我本想u盘启动是没有什么限制的，结果联想硬盘保护一直是在跟我做对。
主要是这两点，我以前是没想过的：
1. 硬盘保护不能通过清空硬盘去除
2. 固定优先启动硬盘保护

猜测这个硬盘保护是写在网卡上的（硬盘已经被我清理干净了，但硬盘保护仍然存在）。
不知道这个硬盘保护是怎么写在网卡上的，更不知道为什么网卡固定优先启动（猜测是恢复了BIOS设置）。
最后试了试**仅UEFI启动**，结果是可以u盘启动的。
猜测网卡这东西就只支持Legacy启动。
那么进入了livecd就是可以直接安装了。

### 网络设置
这是让我最难受的地方，一个基本常识我居然没有意识到。机房和办公室这种地方IP一般是静态的。（苦笑
先说一下静态IP如何配置，和锐捷如何认证。
**静态IP设置**
这里以CentOS为例，首先得有网卡和驱动，这里的网卡型号是这样的
还得知道网卡接口名
```bash
$ lspci | grep Network
00:19.0 Ethernet controller: Intel Corporation 82579LM Gigabit Network Connection (Lewisville) (rev 04)

$ ip link show
2: eno1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000
    link/ether 44:37:e6:c8:d0:af brd ff:ff:ff:ff:ff:ff

```

设置静态IP，编辑/etc/sysconfig/network-scripts/ifcfg-xxx
xxx对应网卡接口，这里是eno1。
注意只需配置下面的东西就好。我左边的电脑是65号，所以IP就是192.168.3.65
```bash
BOOTPROTO=static
ONBOOT=yes
DNS1=202.117.80.2
IPADDR=192.168.3.65
NETMASK=255.255.255.0
GATEWAY=192.168.3.254
```

然后重启网络，连接锐捷。
注意锐捷里的IP设置应该与上面相同，取消dhcp。
```bash
$ service restart network
$ sudo mentohust
```
上网就这么简单，基本常识我都没有意识到，简直了。

<p></p>

### 受苦过程
我受的这些个苦一定得写写，不然我到哪里诉苦。

## **U盘启动问题**
上周末在机房无聊，准备装个archlinux，配置下环境。
结果联想硬盘保护优先启动，检测到U盘不让进入系统。

OK，想办法进入BIOS设置一下启动顺序就好。
一顿乱按，发现F12可以进入启动顺序设置界面，通过这个进入BIOS。
没有开启仅UEFI启动，结果就是怎么也进不了U盘。
最后这个问题还是猜测着解决了。

## **网络问题**
archlinux.iso仅支持网络安装系统，进入livecd发现没网的。

OK，拷贝个锐捷客户端，认证一下就好咯。
结果就直接设置**动态分配ip**，发现认证成功但就是没有得到ip？

可以的，问了问大佬，试试**拨号连接**。
发现机房网络没有改造，意思就是没得拨号连接用。

行么，买个**无线网卡连校园wifi**总行了吧。
买来发现**linux没得驱动**用（我好瓜-_-
查了半天驱动模块，每个模块按个试，都是没用。
最后考虑ndiswrapper安装Windows驱动。
源码下载好了，发现archlinux默认不让使用make(_make)
换ubuntu，装好系统发现根本没有make，就连gcc都没得（惊了ubuntu开发者和用户都是神人么...
无奈考虑可以简单用iso本地源的centos。
ndiswrapper编译成功，windows驱动安装成功，模块加载成功，就是网卡接口找不到。（windows驱动是从网卡的sr0里提取出来的，绝对匹配。
我当场绝望，于是打了一场训练赛，就过了两道水题更绝望了。

今天早早回宿舍，吃了顿好的就上路来机房了。
特别巧，突然想了解动态IP是如何分配，于是打开windows锐捷客户端，发现这根本就是静态IP。
所以说今天就是本月最高兴的一天了，解决了半个月没有解决的问题哈哈。

### 附图一张
这两天配置好了环境，体验极好
![](https://images2018.cnblogs.com/blog/1225237/201808/1225237-20180806212151560-660815318.png)